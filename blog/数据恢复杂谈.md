---
title: 数据恢复杂谈
description: 数据恢复杂谈
keywords:
- 数据
- 恢复
tags: 
- 技术
authors:
- 7Wate
date: 2020-08-14
---

昨天下午一位公务人员通过朋友联系到我，需要我帮忙恢复执法记录仪中的视频文件。因为他不知道执法记录仪的工作原理，所以导致一个重要的执法视频被覆盖。我了解后，觉得有几率恢复，便有了这次数据恢复的经历。


## 数据恢复基本常识

首先对于电子文件的损坏，无外乎以下两种损坏的方式。

### 物理损毁

就是指存储电子文件的物理硬件：磁带、磁盘、光盘等损毁，因为物理元件的损毁导致文件修复难度极大，所及基本上 99% 的物理损毁很难被修复，同时文件的价值也可能不值得我们去修复（物理损毁修复价格及其昂贵）。

### 逻辑损坏

逻辑损坏有很多种，常见的就是电子文件被删除，覆盖，格式化等。逻辑损坏修复的可能性较大，同时修复的价值相对物理损毁较低，所以大部分的逻辑损坏都是可以尝试修复的，这也是我觉得能恢复上述的原因。

### 恢复方式

大多逻辑损坏可以通过市面上常见的数据恢复软件修复，例如 DiskGenius 就一款专业级的数据恢复软件，同时也不乏其他好用的软件，需要各位自行体验了。

## 文件修复过程

1. 执法记录仪是惠普的 DSJ 系列之一，拥有官方的桌面管理工具，通过阅读说明书发现连接记录仪需要禁用驱动程序签名强制，具体操作可以 Google。
2. 连接执法记录仪，登录软件，进入U盘模式。
3. 通过使用数据恢复软件，查找到近两年的视频文件。
4. 恢复视频文件，发现视频文件无法打开。
5. 猜测视频文件头可能损坏，使用视频修复工具修复。
6. 文件修复成功，但视频错乱，只修复了部分帧数。

首先在成功连接执法记录仪后，便先用了 DiskGenius，但发现恢复的是一些无用文件。便找到了另外一款，该软件成功恢复了视频文件的目录，所以我觉得还是挺有希望的。26G 的视频恢复了一个多小时，但是恢复之后只有几个视频文件可以打开。

这个时候心凉了一半，觉得可能要出糗了。但是根据我多年的行业经验和直觉，我觉的还有救。使用十六进制编辑工具打开视频，果不其然有救。至于为什么有救，因为我之前逆向研究过 GIF 的文件格式，所以我猜测，文件头可能是损坏的，但是视频的部分帧数可能还没有被覆盖。但是现在去哪里找一个这样的工具，总不能现成写一个吧。

不过还真就找到了这样的一个工具：Video Repair Tool，通过它我成功的修复了部分未覆盖的视频帧数 。后来还是没能帮上忙，执法视频文件在 1 月 17 日，我只找回来到 1 月 31 日的部分视频文件。

## 杂谈

简单的描述了一下这次的文件恢复，其实我没有这项技能的。只是凭借多年的行业经验和直觉，我才揽下这个小 case 的。

后来 Google 了一下，看到了挺多对数据恢复和销毁的观点。这里我也简单谈一下自己的看法，欢迎各位交流。

对于销毁文件，因为电子文件是被人为的创造出来的，所以它不存在销毁的决无踪迹。但是你可以销毁它存在的记录，使其恢复的成本提高。为什么要这样说，因为毕竟猴子算法都存在可能性，所以任何文件都有被修复或创造范本的可能性存在。

但是如何提高文件的恢复成本，网上有很多种说法：全覆盖 35 次，0 填充一次，扔进火堆哈哈。我认为在不损害物理硬件的前提下，理论上三次全覆盖擦写，找回的可能性就如同猴子算法的平均时间复杂度一样 O(n × n!)。

希望大家多了解一下相关的知识，务必不要让自己的文件损毁。我之前一块 2T 移动硬盘坏掉了给我心疼的，心疼着心疼着我还是没想起来里面到底存了啥哈哈哈。

> 硬盘有价、数据无价！

